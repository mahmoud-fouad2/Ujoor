# ๐ ุชุนุฑููุงุช ุงูููุชุฌ - Ujoors (ุฃุฌูุฑ)

> ูุฐุง ุงูููู ููุซู ุงูููุงููู ุงูุฃุณุงุณูุฉ ููููุชุฌ ููุฌุจ ุชุญุฏูุซู ูุน ูู ุชุบููุฑ ุฌููุฑู

---

## ๐ข ูููุฐุฌ Multi-Tenancy

### ูุง ูู ุงูู Tenantุ
ุงูู Tenant ูู **ุงูุดุฑูุฉ/ุงููุคุณุณุฉ** ุงูุชู ุชุณุชุฎุฏู ููุตุฉ ุฃุฌูุฑ. ูู ุดุฑูุฉ ููุง:
- ุจูุงูุงุชูุง ุงููุนุฒููุฉ ุชูุงููุง
- ุฅุนุฏุงุฏุงุชูุง ุงูุฎุงุตุฉ
- ูุณุชุฎุฏูููุง

### ููู ูุชู ุชุญุฏูุฏ ุงูู Tenantุ
```
ุงูุทุฑููุฉ ุงูุฃุณุงุณูุฉ: Subdomain
- ุงูุดุฑูุฉ: acme โ acme.ujoors.com
- ุงูุดุฑูุฉ: riyadh-co โ riyadh-co.ujoors.com

ูุญูููุง (Development):
- acme.localhost:3000
- riyadh-co.localhost:3000
```

### ูุง ููุฌุฏ Self-Signup
- โ ุงูุดุฑูุงุช ูุง ุชุณุชุทูุน ุงูุชุณุฌูู ุฐุงุชููุง
- โ Super Admin ููุท ููุดุฆ ุงูุดุฑูุงุช
- โ Landing Page ูููุง ูููุฐุฌ "ุทูุจ ุงุดุชุฑุงู" ููุตู ูู Inbox ุฏุงุฎูู

---

## ๐ฅ ุงูุฃุฏูุงุฑ (Roles)

### 1. Super Admin (ูุฏูุฑ ุงูููุตุฉ)
- **ุงููุณุชูู**: ุฏุงุฎูู - ูุฑูู Ujoors ููุท
- **ุงูุตูุงุญูุงุช**:
  - ุฅูุดุงุก/ุชุนุฏูู/ุชุนููู ุงูุดุฑูุงุช (Tenants)
  - ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช ูุงูููุงุชูุฑ
  - ุงูุชุญูู ูู ุงูุซููุงุช ุงููุชุงุญุฉ
  - ูุฑุงุฌุนุฉ ุทูุจุงุช ุงูุงุดุชุฑุงู
  - ุงููุตูู ููู ุงูุจูุงูุงุช (ููุฏุนู ุงูููู)

### 2. Company Admin (ูุฏูุฑ ุงูุดุฑูุฉ)
- **ุงููุณุชูู**: ุนูู ูุณุชูู ุงูุดุฑูุฉ
- **ุงูุตูุงุญูุงุช**:
  - ุฅุฏุงุฑุฉ ูู ุจูุงูุงุช ุงูุดุฑูุฉ
  - ุฅูุดุงุก/ุชุนุฏูู ุงููุณุชุฎุฏููู ูุงูุฃุฏูุงุฑ
  - ุชุบููุฑ ุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ (ุงูุซููุ ุงููุบุฉ)
  - ุฅุฏุงุฑุฉ ุงูุฃูุณุงู ูุงููููู ุงูุชูุธููู

### 3. Manager (ูุฏูุฑ)
- **ุงููุณุชูู**: ุนูู ูุณุชูู ุงููุณู/ุงููุฑูู
- **ุงูุตูุงุญูุงุช**:
  - ุฅุฏุงุฑุฉ ูุฑููู ููุท
  - ุงูููุงููุฉ ุนูู ุงูุทูุจุงุช (ุฅุฌุงุฒุงุชุ ูุตุฑููุงุช)
  - ุนุฑุถ ุชูุงุฑูุฑ ุงููุฑูู
  - ุชูููู ุงูุฃุฏุงุก

### 4. Employee (ููุธู)
- **ุงููุณุชูู**: ุนูู ูุณุชูู ุงููุฑุฏ
- **ุงูุตูุงุญูุงุช**:
  - ุนุฑุถ ุจูุงูุงุชู ุงูุดุฎุตูุฉ
  - ุชูุฏูู ุงูุทูุจุงุช (ุฅุฌุงุฒุฉุ ูุตุฑููุงุช)
  - ุชุณุฌูู ุงูุญุถูุฑ
  - ุนุฑุถ ูุดู ุฑุงุชุจู

---

## ๐ ุงููุบุฉ ูุงูุงุชุฌุงู (i18n & RTL)

### ุงููุบุงุช ุงููุฏุนููุฉ
- **ุงูุนุฑุจูุฉ (ar)**: ุงููุบุฉ ุงูุงูุชุฑุงุถูุฉ
- **ุงูุฅูุฌููุฒูุฉ (en)**: ูุบุฉ ุซุงูููุฉ

### ููู ูุชู ุชุญุฏูุฏ ุงููุบุฉุ
1. ูู Cookie: `ujoors_locale`
2. ุงูุงูุชุฑุงุถู: `ar`

### RTL/LTR
- ุงูุนุฑุจูุฉ โ `dir="rtl"`
- ุงูุฅูุฌููุฒูุฉ โ `dir="ltr"`

### ุงูุฎุท
- **IBM Plex Sans Arabic**: ููุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- ููุณุชุถุงู ูุญูููุง ูู `/app/fonts/`

---

## ๐จ ุงูุซููุงุช (Themes)

### ูุธุงู ุงูุซููุงุช
```
ุงููุณุชูู 1: Light/Dark Mode
- ูุชุญูู ุจู ุงููุณุชุฎุฏู
- ููุญูุธ ูู localStorage ุนุจุฑ next-themes

ุงููุณุชูู 2: UI Theme (ุงูุดูู ุงูุนุงู)
- Theme A: shadcn (ุงูุงูุชุฑุงุถู)
- Theme B: mantine (ุชุฌุฑูุจู)
- ููุญูุธ ูู Cookie: ujoors_ui_theme
```

### ูู ูุชุญูู ูู ุงูุซููุ
- **Super Admin**: ูุญุฏุฏ ุงูุซููุงุช ุงููุชุงุญุฉ ููููุตุฉ
- **Company Admin**: ูุฎุชุงุฑ ุงูุซูู ุงูุงูุชุฑุงุถู ููุดุฑูุฉ
- **ุงููุณุชุฎุฏู**: ููููู ุงูุชุจุฏูู ุจูู Light/Dark

---

## ๐ ุงููุตุงุฏูุฉ (Authentication)

### ูุธุงู ุงููุตุงุฏูุฉ ุงูุญุงูู (Skeleton)
```typescript
// ุงูุฌูุณุฉ ุชูุญูุธ ูู Cookie ูุดูุฑ
Cookie: ujoors_session

// ูุญุชูู ุงูุฌูุณุฉ
{
  user: { id, email, name, role, tenantId },
  accessToken: string,
  expiresAt: timestamp
}
```

### ุงููุธุงู ุงููุณุชูุฏู (ูุงุญููุง)
- JWT Access Tokens (15 ุฏูููุฉ)
- Refresh Tokens (7 ุฃูุงู)
- 2FA ุงุฎุชูุงุฑู

---

## ๐ ูููู ุงููููุงุช ุงููููุฉ

```
d:\Mahmoud\hghvadt\Jisr\
โโโ UJOORS_PLATFORM_COMPLETE_PLAN.md  โ ุงูุฎุทุฉ (ูุง ุชูุญุฐู!)
โโโ docs/
โ   โโโ PRODUCT_DEFINITIONS.md        โ ูุฐุง ุงูููู
โโโ i18n/
โ   โโโ messages/ar.json              โ ุชุฑุฌูุงุช ุนุฑุจูุฉ
โ   โโโ messages/en.json              โ ุชุฑุฌูุงุช ุฅูุฌููุฒูุฉ
โ   โโโ request.ts                    โ ุฅุนุฏุงุฏ next-intl
โโโ lib/
โ   โโโ auth.ts                       โ ูุธุงุฆู ุงููุตุงุฏูุฉ
โ   โโโ guards.ts                     โ ุญุฑุงุณุฉ ุงูุตูุญุงุช
โ   โโโ tenant.ts                     โ ูุธุงุฆู Multi-tenancy
โ   โโโ design-tokens.ts              โ ููู ุงูุชุตููู
โโโ app/
โ   โโโ layout.tsx                    โ Root Layout + Font
โ   โโโ globals.css                   โ Tailwind + CSS Vars
โ   โโโ fonts/                        โ ุฎุทูุท ูุญููุฉ
โโโ proxy.ts                          โ Tenant/Locale resolver
```

---

## ๐ ุญุงูุงุช ุงูุดุฑูุฉ (Tenant Status)

| ุงูุญุงูุฉ | ุงููุตู | ุงููุตูู |
|--------|-------|--------|
| `ACTIVE` | ุดุฑูุฉ ูุดุทุฉ | ูุงูู |
| `SUSPENDED` | ูุนููุฉ (ุนุฏู ุณุฏุงุฏ ูุซูุงู) | ูููุฑุงุกุฉ ููุท |
| `DELETED` | ูุญุฐููุฉ (soft delete) | ูุง ูุตูู |

---

## ๐ ุณูุฑ ุงูุนูู: ุฅูุดุงุก ุดุฑูุฉ ุฌุฏูุฏุฉ

```mermaid
graph TD
    A[ุทูุจ ุงุดุชุฑุงู ูู Landing] --> B[ูุตู ูู Inbox ูู Super Admin]
    B --> C{ูุฑุงุฌุนุฉ ุงูุทูุจ}
    C -->|ููุงููุฉ| D[Super Admin ููุดุฆ Tenant]
    D --> E[ุชูููุฏ Company Admin]
    E --> F[ุฅุฑุณุงู ุฏุนูุฉ ุจุงูุฅูููู]
    F --> G[Company Admin ูููุนูู ุญุณุงุจู]
    G --> H[ุงูุดุฑูุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู]
    C -->|ุฑูุถ| I[ุฅุดุนุงุฑ ููุนููู]
```

---

## ๐ ููุงุญุธุงุช ูููุทูุฑูู

1. **ูู Query/API ูุฌุจ ุฃู ูุชุถูู tenantId**
   - ูุง ุงุณุชุซูุงุกุงุช ุฅูุง ูู Super Admin

2. **ุงูุชุฑุฌูุฉ**
   - ุงุณุชุฎุฏู ููุงุชูุญ ูู `i18n/messages/*.json`
   - ูุง ุชูุชุจ ูุตูุต hardcoded

3. **ุงูุตูุงุญูุงุช**
   - ุงุณุชุฎุฏู `guardAuth()`, `guardRole()` ูู ุงูุตูุญุงุช
   - ุชุญูู ูู ุงูุตูุงุญูุงุช ูู API routes ุฃูุถูุง

4. **ุงูุซูู**
   - ูู ุงูููููุงุช ูุฌุจ ุฃู ุชุนูู ูู Light ู Dark
   - ุงุณุชุฎุฏู CSS Variables ูู `globals.css`

---

ุขุฎุฑ ุชุญุฏูุซ: 2026-01-24
